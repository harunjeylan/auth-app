{"version":3,"sources":["../../src/filters/http-server-exception.filter.ts"],"sourcesContent":["import {\n  ArgumentsHost,\n  Catch,\n  ExceptionFilter,\n  HttpStatus,\n  Logger,\n} from '@nestjs/common';\nimport { Request, Response } from 'express';\n\n@Catch()\nexport class HttpServerExceptionFilter implements ExceptionFilter {\n  private readonly logger = new Logger(HttpServerExceptionFilter.name);\n  catch(exception: any, host: ArgumentsHost) {\n    const ctx = host.switchToHttp();\n    const response = ctx.getResponse<Response>();\n    const request = ctx.getRequest<Request>();\n    this.logger.error(exception);\n    const message =\n      exception?.message ??\n      exception?.response?.message ??\n      'Internal Server Error';\n\n    const statusCode =\n      exception?.statusCode ??\n      exception?.response?.statusCode ??\n      HttpStatus.INTERNAL_SERVER_ERROR;\n    console.log(exception);\n\n    response.status(statusCode).json({\n      error: true,\n      statusCode: statusCode,\n      message: message,\n      timestamp: new Date().toISOString(),\n      path: request.url,\n    });\n  }\n}\n"],"names":["HttpServerExceptionFilter","catch","exception","host","ctx","switchToHttp","response","getResponse","request","getRequest","logger","error","message","statusCode","HttpStatus","INTERNAL_SERVER_ERROR","console","log","status","json","timestamp","Date","toISOString","path","url","Logger","name","Catch"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAUaA;;;eAAAA;;;wBAJN;;;;;;;AAIA,IAAA,AAAMA,4BAAN,MAAMA;IAEXC,MAAMC,SAAc,EAAEC,IAAmB,EAAE;QACzC,MAAMC,MAAMD,KAAKE,YAAY;QAC7B,MAAMC,WAAWF,IAAIG,WAAW;QAChC,MAAMC,UAAUJ,IAAIK,UAAU;QAC9B,IAAI,CAACC,MAAM,CAACC,KAAK,CAACT;QAClB,MAAMU,UACJV,WAAWU,WACXV,WAAWI,UAAUM,WACrB;QAEF,MAAMC,aACJX,WAAWW,cACXX,WAAWI,UAAUO,cACrBC,kBAAU,CAACC,qBAAqB;QAClCC,QAAQC,GAAG,CAACf;QAEZI,SAASY,MAAM,CAACL,YAAYM,IAAI,CAAC;YAC/BR,OAAO;YACPE,YAAYA;YACZD,SAASA;YACTQ,WAAW,IAAIC,OAAOC,WAAW;YACjCC,MAAMf,QAAQgB,GAAG;QACnB;IACF;;aAxBiBd,SAAS,IAAIe,cAAM,CAACzB,0BAA0B0B,IAAI;;AAyBrE;AA1Ba1B;IADZ2B,IAAAA,aAAK;GACO3B"}